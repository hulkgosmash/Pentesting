# Windows 11

## Bypass TPM Requirement for Setup

In case you do not want to Encrypt the Virtual Machine, then to bypass the TPM 2.0 requirements while installing Windows 11, Please follow the below steps:

{% code overflow="wrap" %}
```
While installing Windows 11, if your computer does not meet the hardware requirements, you will see a message stating, "This PC can't run Windows 11." Windows 11 setup blocked due to missing hardware requirements. 

When you see the above message, press Shift+F10 (Or Shift+fn+F10) on your keyboard at the same time to launch a command prompt. At the command prompt, type regedit and press enter to launch the Windows Registry Editor.

When the Registry Editor opens, navigate to: HKEY_LOCAL_MACHINE\SYSTEM\Setup, Right-click on the Setup key and select New > Key.

When prompted to name the key, Type LabConfig and press enter.

Now right-click on the LabConfig key and select New > DWORD (32-bit) value and create a value named BypassTPMCheck, and set its data to 1. 

Once you configure the BypassTPMCheck key-value under the LabConfig key, close the Registry Editor, and then type exit in the Command Prompt followed by enter to close the window. You will now be back at the message stating that the PC can't run Windows 11. 

Click on the back button in the Windows Setup dialog, as shown below. Press the back button in Windows setup.

You will now be back at the screen prompting you to select the version of Windows 11 you wish to install. You can now continue with the setup, and the hardware requirements will be bypassed, allowing you to install Windows 11.
```
{% endcode %}

## Enable Local Account

{% code overflow="wrap" %}
```
At the final setup screen prior to logging in. Hold shift push F10 to load command prompt. Type below command and wait for reboot. 
oobe\bypassnro
```
{% endcode %}

## Activation

```powershell
# From a PowerShell prompt
irm https://massgrave.dev/get | iex
```

## Disable Windows Defender

{% code overflow="wrap" %}
```powershell
# 1. Download Autoruns for Windows
https://learn.microsoft.com/en-us/sysinternals/downloads/autoruns
# 2. Turn off Real-time protection
# 3. Boot into safe mode
Run 'msconfig' Select the tab Boot. In the section Boot options, enable Safe boot. Click on OK. Click on Restart.
# 4. Start Autoruns for Windows
# 5. Enable Windows Services in Autoruns
Go to the tab Services. It will not show many services. That’s because Windows services are not showing by default. Click in the menu bar on Options. Uncheck Hide Windows Entries. It will show the Windows services in the list view.
# 6. Uncheck Windows Defender Antivirus Service
Search for WinDefend and uncheck the checkbox. Unchecking will prevent the Windows Defender automatic startup after every reboot.
# 7. Boot into normal startup
Start the application msconfig. Select the Normal startup. Click on OK. Click on Restart.
```
{% endcode %}

Destroy Defender

```bash
# Open Explorer
# Navigate to c:\programdata\Microsoft\Windows Defender\
# Open the properties of the folder Platform (right-click > select properties)
# Select the Security tab
# Click on Advanced
# Change the Owner
# Click on Advanced > Find Now and select Administrators
# Click Ok (twice) to take ownership
# Select each Permission entry
# Click Remove
# Do that for all users/entries in the list
# Make sure you select Replace owner on subcontainers and objects
# Select Replace all child object permissions
# Click Apply
```
