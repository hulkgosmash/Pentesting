# Queries

## PowerUpSQL

Once we have accesss, there are several options for issuing queries against a SQL instance.  `Get-SQLQuery` from PowerUpSQL:

{% code overflow="wrap" %}
```bash
beacon> powershell Get-SQLQuery -Instance "sql-2.dev.cyberbotic.io,1433" -Query "select @@servername"

Column1
-------
SQL-2
```
{% endcode %}

## SQLRecon

{% code overflow="wrap" %}
```bash
beacon> execute-assembly C:\Tools\SQLRecon\SQLRecon\bin\Release\SQLRecon.exe -a windows -s sql-2.dev.cyberbotic.io,1433 -m query -o "select @@servername"

[+] Executing: select @@servername on sql-2.dev.cyberbotic.io,1433:

column0 | 
----------
SQL-2 |
```
{% endcode %}

## Impacket

{% code overflow="wrap" %}
```bash
ubuntu@DESKTOP-3BSK7NO ~> proxychains mssqlclient.py -windows-auth DEV/bfarmer@10.10.122.25
ProxyChains-3.1 (http://proxychains.sf.net)
Impacket v0.10.0 - Copyright 2022 SecureAuth Corporation

Password:
|S-chain|-<>-10.10.5.50:1080-<><>-10.10.122.25:1433-<><>-OK
[*] Encryption required, switching to TLS
[*] ENVCHANGE(DATABASE): Old Value: master, New Value: master
[*] ENVCHANGE(LANGUAGE): Old Value: , New Value: us_english
[*] ENVCHANGE(PACKETSIZE): Old Value: 4096, New Value: 16192
[*] INFO(SQL-2): Line 1: Changed database context to 'master'.
[*] INFO(SQL-2): Line 1: Changed language setting to us_english.
[*] ACK: Result: 1 - Microsoft SQL Server (150 7208)
[!] Press help for extra shell commands

SQL> select @@servername;

--------------------------------------------------------------------------------------------------------------------------------

SQL-2
```
{% endcode %}

## HeidiSQL

Or a Windows SQL GUI, such as [HeidiSQL](https://www.heidisql.com/)via Proxifier

<figure><img src="../../../.gitbook/assets/heidi.webp" alt=""><figcaption></figcaption></figure>
