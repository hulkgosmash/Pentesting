# Windows Concepts

## Windows On Windows

Most Windows-based machines use the 64-bit version of the Windows operating system. However, many applications are still 32-bit.

To facilitate this, Microsoft introduced the concept of _Windows On Windows 64-bit_ (_WOW64_) which allows a 64-bit version of Windows to execute 32-bit applications with almost no loss of efficiency.

WOW64 utilizes four 64-bit libraries (Ntdll.dll, Wow64.dll, Wow64Win.dll and Wow64Cpu.dll) to emulate the execution of 32-bit code and perform translations between the application and the kernel.

On 32-bit versions of Windows, most native Windows applications and libraries are stored in C:\Windows\System32. On 64-bit versions of Windows, 64-bit native programs and DLLs are stored in C:\Windows\System32 and 32-bit versions are stored in C:\Windows\SysWOW64.

As penetration testers, we must remain aware of the architecture or _bitness_ of our targets, since this dictates the type of shellcode and other compiled code that we can use.

## Win32 APIs

The Windows operating system, and its various applications are written in a variety of programming languages ranging from assembly to C# but many of those make use of the Windows-provided built-in _application programming interfaces_ (or _APIs_).

These interfaces, known as the _Win32 API_, offer developers pre-built functionality. The APIs themselves are designed to be invoked from C and are documented with C-style data types but as we will discover throughout this course, they can be used with multiple other languages.

Many of the Win32 APIs are documented by Microsoft. One simple example is the _GetUserNameA_ API exported by Advapi32.dll which retrieves the name of the user executing the function.

The syntax section of the documentation shows the _function prototype_[3](https://portal.offensive-security.com/courses/pen-300/books-and-videos/modal/modules/operating-system-and-programming-theory/windows-concepts/win32-apis#fn3) that details the number and type of arguments along with the return type:
