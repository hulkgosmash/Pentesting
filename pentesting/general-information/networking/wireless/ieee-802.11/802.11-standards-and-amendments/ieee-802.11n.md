# IEEE 802.11n

IEEE 802.11n was intended to improve transfer rates and provide more range on 2.4 GHz and 5 GHz networks. There were two releases, first allowing speeds up to 74 Mb/s, and subsequently speeds up to 300 Mb/s. The first release is based on the draft, while the IEEE 802.11 was still working on it. The speed increase in IEEE 802.11n is due in large part to its use of MIMO technology.

MIMO uses multiple antennas, each with its own transmitter and receiver. It improves signal reception by taking advantage of the _multipath_ propagation phenomenon. Normally, signals bounce off of objects such as walls, doors, etc., degrading reception quality. In contrast, MIMO leverages this issue to enhance reception.

802.11n allows for the use of up to four spatial streams and the equivalent number of antennas to send and receive at a higher transfer rate. Commercially, up to three streams are available and the channel width can be 40 MHz instead of 20 MHz, thus doubling the data rate.

A deep dive into spatial streams, commonly abbreviated as _streams_ in Wi-Fi, is out of scope for this course. However, the _number_ of streams will become important when analyzing networks as we will see later on.

802.11n also introduced a new mode called Greenfield mode. Greenfield mode introduces a new preamble (a pause that comes before a wireless signal hits a networking device) for 802.11n only, whereby only devices operating in 802.11n will be allowed on the network.

Finally, in 802.11n a 20 MHz channel is divided into subcarriers, similar to 802.11a/g. The 64 subcarriers are divided slightly differently. Four of them are used for pilots like in 802.11a/g but 52 are used for data (instead of 48) and thus eight are used as null.

**Antennas**

The number of streams, and therefore the rates that can be reached, depend on the number of antennas on the transmitter and receiver.

The notation format is **t**x**r**:**s**

* _t_: Number of transmit (TX) chains
* _r_: Number of receiving (RX) chains
* _s_: Maximum number of spatial streams the radio can use

For example, a common configuration would be 2x2:2 where the radio has 2 TX chains, 2 RX chains, and 2 streams. A 3x3:3 has 3 RX, 3 TX, and 3 streams.

This notation is not only used for 802.11n but also for any other amendment using MIMO.

You may encounter a slightly different notation format: **t**T**r**R. The two configurations above would be 2T2R, and 3T3R. The number of streams is not present in this format. Generally, we can assume that the number of streams is equal to the highest of the two numbers present.

The number of antennas doesn't always equate to the number of streams/chains, but the number of antennas is always greater or equal to the number of streams/chains. As such, a device with four antennas could very well have three streams or even two.

For example, the Alfa AWUS1900 wireless adapter has four antennas (four transmit and receive chains) but is a three spatial stream device: 4x4:3.

**MCS Rates**

802.11n uses different modulations, coding rates, and streams to achieve speeds of up to 600 Mbit (450 Mbit commercially). A Modulation and Coding Scheme (MCS) rate is just a number that refers to a specific modulation and coding rate, and, in the case of 802.11n, the number of spatial streams in use. The rate also depends on the bandwidth of the channel, and to a lesser extent, the guard interval, which is the interval between frames.

The coding rate (in the fourth column of the chart below) of a forward error correction code is the non-redundant portion of useful data. It is usually expressed in k/n, where for k bits of information, there is a total of n bits. n-k bits are redundant for error correction.

<figure><img src="../../../../../../.gitbook/assets/image (20).png" alt=""><figcaption><p>802.11n rates (Source: Wikipedia)</p></figcaption></figure>

A more detailed table of MCS index numbers and corresponding modulations can be found at MCSIndex.com. As we can observe in Figure 4, adding a second, third, or fourth stream is just multiplying the rate by the same amount (2, 3, and 4 times, respectively).

A more in in-depth discussion of MCS is outside the scope of this course, but there will be some practical applications we need to be aware of, for example, when we are looking at captured Wi-Fi traffic.

**HT40+/HT40- Channels**

20 MHz channels in 802.11n are sometimes called HT20. The HT stands for High Throughput and the 20 represents the bandwidth of the channel in MHz. HT40 channels bond two 20 MHz channels together for increased rates. There is a primary 20MHz channel, and the secondary 20MHz channel is four channels away from the primary. The reason the primary and secondary channels are not sequential (for example channel 1 HT40+ does not bond channels 1 and 2), is because these two channels' frequency ranges overlap. A primary and secondary channel allows devices that don't support 40 MHz channels to connect.

Let's look at one example. In channel 1 HT40+, the primary channel is channel 1 and the secondary is "+" four channels, or channel 5. Channel 1 HT40- doesn't exist as the secondary channel would go below the allowed frequency range. Channel 5 HT40-, on the other hand, would have the primary channel as channel 5 and the secondary as channel 1.

HT40+ starts at 1 and the last HT40+ channel is 7 (9 for Europe) in 2.4GHz. Similar restrictions apply to 5GHz channels.

<figure><img src="../../../../../../.gitbook/assets/image (8).png" alt=""><figcaption><p>HT40+ channels in 2.4GHz</p></figcaption></figure>

HT40- starts at channel 5 and the last HT40- is 11 (13 for Europe).

<figure><img src="../../../../../../.gitbook/assets/image (26).png" alt=""><figcaption><p>HT40- channels in 2.4GHz</p></figcaption></figure>
