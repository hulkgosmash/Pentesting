# Certificates

## Conversion

| Info                                                                      | Command                                                                  |
| ------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| Export private key from PFX                                               | `openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -out priv.pem -nodes`  |
| Export certificate from PFX                                               | `openssl pkcs12 -in legacyy_dev_auth.pfx -clcerts -nokeys -out cert.crt` |
| Export public key                                                         | `gpg --export "$key" \| openpgp2ssh "$key" > ~/.ssh/id_rsa.pub`          |
| Export private key                                                        | `gpg --export-secret-key "$key" \| openpgp2ssh "$key" > ~/.ssh/id_rsa`   |
| Then, we change the password for the SSH secret key                       | `ssh-keygen -f ~/.ssh/id_rsa -p`                                         |
| Deletion is required or for some reason it fails to reimport as encrypted | `gpg --delete-secret-key "$key"`                                         |
| Now reimport the original key                                             | `gpg --import < id_rsa.bak`                                              |
| Remove the backup                                                         | `rm id_rsa.bak`                                                          |

## Remove Password

| Comment                                                    | Command                                       |
| ---------------------------------------------------------- | --------------------------------------------- |
| Back up the original key so you can reimport it afterwards | `gpg --export-secret-key "$key" > id_rsa.bak` |
| Now remove the encryption                                  | `gpg --edit-key "$key"`                       |
| Issue passwd and remove the password                       |                                               |
| Quit, and save changes                                     |                                               |
