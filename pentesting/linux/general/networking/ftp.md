# FTP

## File Transfers

Login to host

```bash
ftp 192.168.1.1
```

Passive mode (If you can't see files this may help)

```bash
ftp -p $ip
```

Turn off prompt (Once connected)

```bash
prompt
```

Download all files

```bash
mget *
```

Download all files wget

```bash
wget -r ftp://$user:$password@$ip/
```

View directory curl

```bash
curl -s -v 'ftp://$user:$password@$ip/'
```

View directory curl passive mode

```bash
curl -s -v  -P - 'ftp://$user:$password@$ip/'
```

Upload file curl

```bash
curl -T "file.txt" -P - 'ftp://$user:$password@$ip/files/'
```

## Server

Install Pure-FTP

```bash
sudo apt update && sudo apt install pure-ftpd
```

Bash script to setup Pure-FTP on Kali

```bash
sudo groupadd ftpgroup
sudo useradd -g ftpgroup -d /dev/null -s /etc ftpuser
sudo pure-pw useradd offsec -u ftpuser -d /ftphome
sudo pure-pw mkdb
sudo cd /etc/pure-ftpd/auth/
sudo ln -s ../conf/PureDB 60pdb
sudo mkdir -p /ftphome
sudo chown -R ftpuser:ftpgroup /ftphome/
sudo systemctl restart pure-ftpd
```

Setting up and starting Pure-FTP on Kali

```bash
chmod +x setup-ftp.sh
sudo ./setup-ftp.sh
```
